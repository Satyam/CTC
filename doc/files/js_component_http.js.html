<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/component/http.js - ctc</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="ctc" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>

                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>

                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/EventEmitter.html">EventEmitter</a></li>
                                <li><a href="../classes/http.html">http</a></li>
                                <li><a href="../classes/Parcel.html">Parcel</a></li>
                                <li><a href="../classes/ParcelEv.html">ParcelEv</a></li>
                                <li><a href="../classes/Radio.html">Radio</a></li>
                                <li><a href="../classes/TabView.html">TabView</a></li>
                                <li><a href="../classes/vDOM.html">vDOM</a></li>
                                <li><a href="../classes/vNode.html">vNode</a></li>
                            </ul>

                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/Browserify.html">Browserify</a></li>
                                <li><a href="../modules/Components.html">Components</a></li>
                                <li><a href="../modules/Events.html">Events</a></li>
                                <li><a href="../modules/http.html">http</a></li>
                                <li><a href="../modules/parcel.html">parcel</a></li>
                                <li><a href="../modules/Parcela.html">Parcela</a></li>
                                <li><a href="../modules/parcelEv.html">parcelEv</a></li>
                                <li><a href="../modules/radio.html">radio</a></li>
                                <li><a href="../modules/TabView.html">TabView</a></li>
                                <li><a href="../modules/utilities.html">utilities</a></li>
                                <li><a href="../modules/virtual-DOM.html">virtual-DOM</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>

                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>

                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>

                </div>

            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: js/component/http.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/* jshint node:true, esnext:true */
/* global window: false */

/**
@module utilities
@submodule http
*/

/**
Helper functions to generate standard HTTP requests using the
[xhr](https://www.npmjs.com/package/xhr) npm module.

It is integrated with the rendering engine so that upon completion of a request,
a redraw is requested.

@class http
@static
*/
&quot;use strict&quot;;
var vDOM = require(&#x27;./virtual-dom.js&#x27;);

var xhr = require(&#x27;xhr&#x27;);

/**
Generic entry point for HTTP requests.
It returns a Promise.
It queues and resolves a redraw request.

When resolved successfully, the response will contain:

* &#x60;body&#x60;{Object||String} It the request was for JSON data, it will be returned as an object, otherwise, the plain XHR &#x60;responseText&#x60;.
* &#x60;statusCode&#x60; {Number} Values in the 2xx range will be considered successful, others, a rejection
* &#x60;method&#x60; {String} The HTTP method that had been requested
* &#x60;headers&#x60; {Object} The XHR response headers
* &#x60;url&#x60; {String} The URL requested
* &#x60;rawRequest&#x60; {XMLHttpRequest} The XHR object for this request

The promise can be rejected with a standard JavaScript &#x60;Error&#x60; object with at least &#x60;name&#x60; and &#x60;message&#x60; properties if the request could not be processed due to erroneous arguments.  If the response comes with an error code above the 2xx range, it will also be rejected with the same response object as a successful response.

@method http
@param config {Object}  See [xhr](https://www.npmjs.com/package/xhr)
@return {Promise} as described above.
@static
*/
var http = function (config) {
	vDOM.redrawPending();
	return new Promise(function (resolve, reject) {
		xhr(config, function (err, res, body) {
			if (err) {
				reject(err);
			} else if (res.statusCode &gt; 300) {
				reject(res);
			} else {
				resolve(res);
			}
			// The resolve or rejet methods are async so the redraw has to be delayed for a while.
			global.window.setTimeout(vDOM.redrawReady,0);
		});
	});
};

/**
Produces an HTTP GET request accepting JSON data.
It returns a Promise.
It queues and resolves a redraw request.

When resolved successfully, the response will contain:

* &#x60;body&#x60;{Object} An object with the JSON response already parsed.
* &#x60;statusCode&#x60; {Number} Values in the 2xx range will be considered successful, others, a rejection
* &#x60;method&#x60; {String} The value &#x60;GET&#x60;
* &#x60;headers&#x60; {Object} The XHR response headers
* &#x60;url&#x60; {String} The URL requested
* &#x60;rawRequest&#x60; {XMLHttpRequest} The XHR object for this request

The promise can be rejected with a standard JavaScript &#x60;Error&#x60; object with at least &#x60;name&#x60; and &#x60;message&#x60; properties if the request could not be processed due to erroneous arguments.  If the response comes with an error code above the 2xx range, it will also be rejected with the same response object as a successful response.

@method get
@param url {String} URL for the request
@return {Promise} as described above.
@static
*/
http.get = function (url) {
	return http({
		json: true,
		url: url
	});
};

/**
Produces an HTTP POST (create) request sending and accepting JSON data.
It returns a Promise.
It queues and resolves a redraw request.

When resolved successfully, the response will contain:

* &#x60;body&#x60;{Object} An object with the JSON response already parsed.
* &#x60;statusCode&#x60; {Number} Values in the 2xx range will be considered successful, others, a rejection
* &#x60;method&#x60; {String} The value &#x60;POST&#x60;
* &#x60;headers&#x60; {Object} The XHR response headers
* &#x60;url&#x60; {String} The URL requested
* &#x60;rawRequest&#x60; {XMLHttpRequest} The XHR object for this request

The promise can be rejected with a standard JavaScript &#x60;Error&#x60; object with at least &#x60;name&#x60; and &#x60;message&#x60; properties if the request could not be processed due to erroneous arguments.  If the response comes with an error code above the 2xx range, it will also be rejected with the same response object as a successful response.


@method post
@param url {String} URL for the request
@param body {Object} Data to be sent.  It will be turned into JSON before sending
@static
*/
http.post = function (url, body, cb) {
	return http({
		method: &#x27;POST&#x27;,
		json: true,
		url: url,
		body: body

	}, cb);
};
/**
Alias of [post](#method_post).
Produces an HTTP POST (create) request accepting JSON data.
It returns a Promise.
It queues and resolves a redraw request.

When resolved successfully, the response will contain:

* &#x60;body&#x60;{Object} An object with the JSON response already parsed.
* &#x60;statusCode&#x60; {Number} Values in the 2xx range will be considered successful, others, a rejection
* &#x60;method&#x60; {String} The value &#x60;POST&#x60;
* &#x60;headers&#x60; {Object} The XHR response headers
* &#x60;url&#x60; {String} The URL requested
* &#x60;rawRequest&#x60; {XMLHttpRequest} The XHR object for this request

The promise can be rejected with a standard JavaScript &#x60;Error&#x60; object with at least &#x60;name&#x60; and &#x60;message&#x60; properties if the request could not be processed due to erroneous arguments.  If the response comes with an error code above the 2xx range, it will also be rejected with the same response object as a successful response.


@method create
@param url {String} URL for the request
@param body {Object} Data to be sent.  It will be turned into JSON before sending
@return {Promise} as described above.
@static
*/
http.create = http.post;
/**
Produces an HTTP PUT (update) request accepting JSON data.
It returns a Promise.
It queues and resolves a redraw request.

When resolved successfully, the response will contain:

* &#x60;body&#x60;{Object} An object with the JSON response already parsed.
* &#x60;statusCode&#x60; {Number} Values in the 2xx range will be considered successful, others, a rejection
* &#x60;method&#x60; {String} The value &#x60;PUT&#x60;
* &#x60;headers&#x60; {Object} The XHR response headers
* &#x60;url&#x60; {String} The URL requested
* &#x60;rawRequest&#x60; {XMLHttpRequest} The XHR object for this request

The promise can be rejected with a standard JavaScript &#x60;Error&#x60; object with at least &#x60;name&#x60; and &#x60;message&#x60; properties if the request could not be processed due to erroneous arguments.  If the response comes with an error code above the 2xx range, it will also be rejected with the same response object as a successful response.


@method put
@param url {String} URL for the request
@param body {Object} Data to be sent.  It will be turned into JSON before sending
@return {Promise} as described above.
@static
*/
http.put = function (url, body, cb) {
	return http({
		method: &#x27;PUT&#x27;,
		json: true,
		url: url,
		body: body

	}, cb);
};

/**
Alias of [put](#method_put).
Produces an HTTP PUT (update) request accepting JSON data.
It returns a Promise.
It queues and resolves a redraw request.

When resolved successfully, the response will contain:

* &#x60;body&#x60;{Object} An object with the JSON response already parsed.
* &#x60;statusCode&#x60; {Number} Values in the 2xx range will be considered successful, others, a rejection
* &#x60;method&#x60; {String} The value &#x60;PUT&#x60;
* &#x60;headers&#x60; {Object} The XHR response headers
* &#x60;url&#x60; {String} The URL requested
* &#x60;rawRequest&#x60; {XMLHttpRequest} The XHR object for this request

The promise can be rejected with a standard JavaScript &#x60;Error&#x60; object with at least &#x60;name&#x60; and &#x60;message&#x60; properties if the request could not be processed due to erroneous arguments.  If the response comes with an error code above the 2xx range, it will also be rejected with the same response object as a successful response.


@method update
@param url {String} URL for the request
@param body {Object} Data to be sent.  It will be turned into JSON before sending
@return {Promise} as described above.
@static
*/
http.update = http.put;
/**
Produces an HTTP DELETE request.
It returns a Promise.
It queues and resolves a redraw request.

When resolved successfully, the response will contain:

* &#x60;body&#x60;{Object} An object with the JSON response already parsed.
* &#x60;statusCode&#x60; {Number} Values in the 2xx range will be considered successful, others, a rejection
* &#x60;method&#x60; {String} The value &#x60;DEL&#x60;
* &#x60;headers&#x60; {Object} The XHR response headers
* &#x60;url&#x60; {String} The URL requested
* &#x60;rawRequest&#x60; {XMLHttpRequest} The XHR object for this request

The promise can be rejected with a standard JavaScript &#x60;Error&#x60; object with at least &#x60;name&#x60; and &#x60;message&#x60; properties if the request could not be processed due to erroneous arguments.  If the response comes with an error code above the 2xx range, it will also be rejected with the same response object as a successful response.


@method del
@param url {String} URL for the request
@return {Promise} as described above.
@static
*/
http.del = function (url, cb) {
	return http({
		method: &#x27;DEL&#x27;,
		json: true,
		url: url
	}, cb);
};



module.exports =  http;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
